<!-- <style>
  .card-perfil {
    border-radius: 7px;
    position: relative;
    display: flex;
    flex-direction: column;
    min-width: 0;
    word-wrap: break-word;
    background: #fff;
    background-clip: border-box;
    border-radius: 5px;
    border: 1px solid #deebfd;
    margin-bottom: 1.3rem;
    box-shadow: -8px 12px 18px 0 #dadee8;
  }

  .main-content {
    max-width: 80% !important;
    margin-left: auto;
    margin-right: auto;
  }

  .bloque-superior-perfil {
    height: fit-content !important;
  }

  .a-comentarios {
    cursor: pointer;
  }

  .btn-comentarios {
    color: #fff !important;
    text-decoration: none !important;
  }
</style> -->

<!-- main-content -->
<div class="main-content app-content">
  <!-- container -->
  <div class="main-container container-fluid">
    <!-- breadcrumb -->
    <div class="breadcrumb-header justify-content-between">
      <div class="my-auto">
        <div class="d-flex">
          <h4 class="content-title mb-0 my-auto">{{ startup.nombreCorto }}</h4>
          <span class="text-muted mt-1 tx-13 ms-2 mb-0">/ Perfil de la Startup</span>
        </div>
      </div>
      <div class="d-flex my-xl-auto right-content">
        <div class="pe-1 mb-xl-0">
          <div class="btn-group dropdown">
            <button class="btn btn-success" [disabled]="startupVotada === true ? 'disabled' : null" (click)="votarStartup()">
              Votar {{ votos }}
              <i class="mdi mdi-arrow-up-bold-circle-outline"></i>
            </button>
          </div>
        </div>
        <div class="mb-xl-0">
          <div class="btn-group dropdown">
            <a (click)="scroll(seccionComentar)" class="btn btn-primary btn-comentarios">Comentar</a>
          </div>
        </div>
      </div>
    </div>
    <!-- breadcrumb -->

    <!-- row -->
    <div class="row">
      <div class="col-xxl-9 col-xl-12 col-lg-12 col-md-12">
        <div class="card overflow-hidden bloque-superior-perfil">
          <div class="item7-card-img px-4 pt-4">
            <a href="javascript:void(0);"></a>
            <img src="{{ startup.imagenURL }}" alt="img" class="cover-image rounded-7 w-100 imagen-startup" />
          </div>
          <div class="card-body">
            <!-- <a href="javascript:void(0);" class="mt-4"><h5 class="font-weight-semibold text-dark">Lorem ipsum dolor sit amet consectetur adipisicing elit.</h5></a> -->
            <h6>Descripción de la startup</h6>
            <p class="">
              {{ startup.descripcionCorta }}
            </p>
          </div>
          <div class="card-footer pb-2 pt-2">
            <div class="item7-card-desc d-md-flex">
              <div class="d-flex align-items-center mt-0">
                <img src="{{ startup.imagenURL }}" class="avatar brround avatar-md me-3" alt="avatar-img" />
                <div>
                  <!-- <a href="profile.html" class="text-dark font-weight-bold">{{startup.nombreLargo}}</a> -->
                  <span>{{ startup.nombreLargo }}</span>
                </div>
              </div>
              <div class="ms-auto mb-2 d-flex mt-3">
                <a href="javascript:void(0);" class="me-3 mb-2 d-flex"
                  ><span class="fe fe-calendar text-muted me-2 tx-17"></span>
                  <div class="mt-0 mt-0 text-dark">{{ startup.fechaCreacion }}</div>
                </a>
                <a class="me-0 d-flex a-comentarios" (click)="scroll(seccionComentarios)"
                  ><span class="fe fe-message-square text-muted me-2 tx-17"></span>
                  <div class="mt-0 mt-0 text-dark">
                    {{ comentarios.length }} {{ comentarios.length === 1 ? ' comentario' : ' comentarios' }}
                  </div>
                </a>
              </div>
            </div>

            <br />

            <div class="div-progreso">
              <h6>Progreso</h6>
              <progress class="barra-progreso" id="file" value="{{ startup.idMonedero.saldo }}" max="{{ startup.montoMeta }}">32%</progress>
            </div>
          </div>
        </div>

        <div class="startup-information">
          <div class="">
            <div class="card" id="basic-alert">
              <div class="card-body">
                <div>
                  <h6 class="card-title mb-1">Información de la Startup</h6>
                  <!-- <p class="text-muted card-sub-title">Ingrese a cada pestaña para revisar su
                                                información</p> -->
                </div>
                <div class="text-wrap">
                  <div class="example">
                    <div class="panel panel-primary tabs-style-1">
                      <div class="tab-menu-heading">
                        <div class="tabs-menu1">
                          <!-- Tabs -->
                          <ul class="nav panel-tabs main-nav-line">
                            <li class="nav-item"><a href="#tab1" class="nav-link active" data-bs-toggle="tab">Información General</a></li>
                            <li *ngIf="inversionistaOAdmin" class="nav-item">
                              <a href="#tab2" class="nav-link" data-bs-toggle="tab">Información para Inversionistas</a>
                            </li>
                            <li *ngIf="inversionistaOAdmin" class="nav-item">
                              <a href="#tab3" class="nav-link" data-bs-toggle="tab">Planes de Inversión</a>
                            </li>
                          </ul>
                        </div>
                      </div>
                      <div class="panel-body tabs-menu-body main-content-body-right border-top-0 border">
                        <div class="tab-content">
                          <div class="tab-pane active" id="tab1">
                            <div>
                              <h5>Categoría</h5>
                              <span>{{ startup.idCategoria.categoria }}</span>
                              <p></p>
                              <h5>Riesgos</h5>
                              <span>
                                {{ startup.riesgos }}
                              </span>
                              <p></p>
                              <h5>Monto Meta</h5>
                              <span>${{ startup.montoMeta }}</span>
                              <p></p>
                              <h5>Sitio Web</h5>
                              <span
                                ><a href="{{ startup.linkSitioWeb }}">{{ startup.linkSitioWeb }}</a></span
                              >
                              <p></p>
                              <h5>Dirección</h5>
                              <!-- <span>{{startup.latitudDireccion}} {{startup.longitudDireccion}}</span> -->
                              <div>
                                <div id="map" class="map-direccion"></div>
                              </div>
                            </div>
                          </div>

                          <div class="tab-pane" id="tab2">
                            <div>
                              <h5>Panorama del Mercado</h5>
                              <span>{{ startup.panoramaMercado }}</span>
                              <p></p>
                              <h5>Beneficios</h5>
                              <span>
                                {{ startup.beneficios }}
                              </span>
                            </div>

                            <br />

                            <div class="row row-xs wd-xl-80p div-comunicar-startup">
                              <div class="col-sm-6 mg-t-10 mg-md-t-0">
                                <button (click)="abrirFormReunion()" class="btn btn-primary btn-block">
                                  Agendar reunión con la startup
                                </button>
                              </div>
                              .

                              <div class="alert alert-success reunionSolicitada" *ngIf="success">
                                <strong>Reunión solicitada con éxito!</strong> La reunión se encuentra en revisión de la startup, en caso de
                                que la startup desee cambiar la fecha de la reunión usted podrá visualizarla en el apartado de reuniones
                              </div>

                              <form
                                id="formReunion"
                                *ngIf="mostrarFormReunion"
                                class="form-horizontal"
                                (ngSubmit)="solicitarReunion()"
                                [formGroup]="formAgendarReunion"
                              >
                                <h4 class="tx-18 mb-3">Formulario de solicitud de reunión</h4>
                                <div class="form-group">
                                  <div class="row">
                                    <div class="col-md-3">
                                      <label class="form-label">Fecha de la reunión</label>
                                    </div>
                                    <div class="col-md-9">
                                      <input type="datetime-local" class="form-control" formControlName="fechaReunion" placeholder="" />
                                      <div
                                        *ngIf="
                                          formAgendarReunion.get('fechaReunion')!.invalid &&
                                          (formAgendarReunion.get('fechaReunion')!.dirty || formAgendarReunion.get('fechaReunion')!.touched)
                                        "
                                      >
                                        <small
                                          class="form-text text-danger"
                                          *ngIf="formAgendarReunion.get('fechaReunion')?.errors?.required"
                                        >
                                          La fecha es requerida.
                                        </small>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <p></p>
                                <div class="form-group">
                                  <div class="row">
                                    <div class="col-md-3">
                                      <label class="form-label">Descripción de la reunión</label>
                                    </div>
                                    <div class="col-md-9">
                                      <textarea
                                        type="textarea"
                                        class="form-control"
                                        formControlName="descripcionReunion"
                                        placeholder="Descripción de la reunión"
                                        maxlength="300"
                                        rows="4"
                                      ></textarea>
                                      <div
                                        *ngIf="
                                          formAgendarReunion.get('descripcionReunion')!.invalid &&
                                          (formAgendarReunion.get('descripcionReunion')!.dirty ||
                                            formAgendarReunion.get('descripcionReunion')!.touched)
                                        "
                                      >
                                        <small
                                          class="form-text text-danger"
                                          *ngIf="formAgendarReunion.get('descripcionReunion')?.errors?.required"
                                        >
                                          La descripción es requerida.
                                        </small>

                                        <small
                                          class="form-text text-danger"
                                          *ngIf="formAgendarReunion.get('descripcionReunion')?.errors?.minlength"
                                        >
                                          La descripción debe ser mayor a 1 caracter.
                                        </small>

                                        <small
                                          class="form-text text-danger"
                                          *ngIf="formAgendarReunion.get('descripcionReunion')?.errors?.maxlength"
                                        >
                                          La descripción no puede ser mas larga de 300 caracteres.
                                        </small>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div id="botonesFormReunion">
                                  <button
                                    type="submit"
                                    [disabled]="formAgendarReunion.invalid"
                                    class="btn btn-primary waves-effect waves-light"
                                  >
                                    Solicitar reunión
                                  </button>
                                  <button type="button" (click)="cerrarFormReunion()" class="btn btn-danger waves-effect waves-light">
                                    Cancelar
                                  </button>
                                </div>
                              </form>
                            </div>
                          </div>

                          <div class="tab-pane" id="tab3">
                            <table class="tabla-planes">
                              <thead>
                                <tr>
                                  <th>Nombre</th>
                                  <th>Descripción</th>
                                  <th>Beneficios</th>
                                  <th>Porcentaje Empresarial</th>
                                  <th>Monto</th>
                                </tr>
                              </thead>
                              <tbody *ngFor="let planDeInversion of planesDeInversion" class="custom-cls-no-br">
                                <tr>
                                  <td class="mid-td">
                                    {{ planDeInversion.nombre }}
                                  </td>
                                  <td class="big-td">
                                    {{ planDeInversion.descripcion }}
                                  </td>
                                  <td class="big-td">
                                    {{ planDeInversion.beneficios }}
                                  </td>
                                  <td class="small-td text-center">{{ planDeInversion.porcentajeEmpresarial }} %</td>
                                  <td class="small-td text-center">$ {{ planDeInversion.monto }}</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="">
            <div class="card">
              <div class="card-header">
                <h3 #seccionComentarios class="card-title">Comentarios</h3>
              </div>
              <div class="card-body" *ngFor="let comentario of comentarios">
                <div class="d-sm-flex p-3 mt-4 border sub-review-section pb-0">
                  <div class="d-flex me-3">
                    <a href="javascript:void(0);" class="comentario__img"
                      ><img class="media-object brround avatar-md" alt="64x64" src="{{ comentario.idUsuario.imagenURL }}" />
                    </a>
                  </div>
                  <div class="media-body">
                    <h5 class="mt-0 mb-1 font-weight-semibold">
                      {{ comentario.idUsuario.nombre }}
                      {{ comentario.idUsuario.primerApellido }}
                      {{ comentario.idUsuario.segundoApellido }}
                      <span class="tx-14 ms-0" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-original-title="verified"
                        ><i class="fe fe-check-circle text-success tx-12"></i
                      ></span>
                    </h5>
                    <p class="font-13 mb-2 mt-2">{{ comentario.fecha.substring(0, 10) }}</p>
                    <p class="font-13 mb-2 mt-2">{{ comentario.comentario }}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="">
            <div class="card">
              <div class="card-header border-bottom-0">
                <h3 class="card-title">Crear un Comentario</h3>
              </div>
              <div class="card-body">
                <div class="mt-2">
                  <div class="form-group">
                    <textarea
                      class="form-control"
                      name="example-textarea-input"
                      rows="6"
                      placeholder="Tu Comentario"
                      (change)="obtenerValorComentario($event)"
                    ></textarea>
                  </div>
                  <button
                    #seccionComentar
                    class="btn btn-primary"
                    (click)="guardarComentario()"
                    [disabled]="comentarioRealizado === true ? 'disabled' : null"
                  >
                    Comentar
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xxl-3 col-xl-12 col-lg-12 col-md-12">
        <h5>Paquetes</h5>
        <ng-container *ngIf="existenPaquetes; else noExistentes">
          <div *ngFor="let paquete of paquetes" class="card-perfil custom-card overflow-hidden">
            <div class="card-header border-bottom">
              <h3 class="card-title">{{ paquete.nombre }}</h3>
            </div>
            <div class="card-body">
              <div class="text-center">
                <div class="rounded-5 px-0 text-justify">
                  <h6>Descripción del Paquete</h6>
                  <span>
                    {{ paquete.descripcion }}
                  </span>
                </div>
                <br />
                <div class="rounded-5 px-0 text-justify">
                  <h6>Costo</h6>
                  <span> ${{ paquete.monto }} </span>
                </div>
              </div>
            </div>
            <button
              class="btn btn-primary waves-effect waves-light btn-comprar-paquete"
              (click)="registrarEnvio($event)"
              value="{{ paquete.id }}"
            >
              Comprar este Paquete
            </button>
          </div>
        </ng-container>
        <ng-template #noExistentes>
          <div class="msg-no-existentes">
            <h6>No existen paquetes activos en este momento</h6>
          </div>
        </ng-template>
      </div>

      <!-- row -->
      <div class="row"></div>
      <!-- row closed -->
    </div>
    <!-- Container closed -->
  </div>
  <!-- main-content closed -->
</div>
